import{a as A,d as V}from"./chunk-GPBPXCER.js";import{n as I,o as v,p as $}from"./chunk-4CLSUXY5.js";import{$a as L,Da as p,Na as c,Oa as G,Wa as y,aa as b,ga as C,ib as u,jb as T,kb as k,lb as n,mb as s,nb as g,pa as d,pb as f,qa as m,qb as h,ra as F,rb as a,sa as D,sb as l,ta as S,tb as E}from"./chunk-M2YEBHPZ.js";var j=$("drive"),U=v(j,e=>e.files),M=v(j,e=>e.isLoading);var R={production:!0,googleRedirectURL:"https://antoinedelaplace.github.io/angular-template/google-redirect"};var B=(()=>{class e extends V{constructor(){super(...arguments),this.clientId="1031575839836-lcrgq524hp9775ipfjree1b5d6n8egma.apps.googleusercontent.com",this.redirectUri=R.googleRedirectURL,this.oauth2Endpoint="https://accounts.google.com/o/oauth2/v2/auth",this.scope="email profile https://www.googleapis.com/auth/drive"}signInWithGoogle(){let t=`${this.oauth2Endpoint}?client_id=${this.clientId}&redirect_uri=${this.redirectUri}&response_type=token&scope=${this.scope}`,i=500,o=600,H=window.screen.width/2-i/2,W=window.screen.height/2-o/2,q=window.open(t,"googleAuthPopup",`width=${i},height=${o},top=${W},left=${H}`),x=_=>{if(_.origin!==window.location.origin)return;let w=_.data?.accessToken;w&&(this.storeToken(w),window.removeEventListener("message",x),q?.close())};window.addEventListener("message",x)}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=S(e)))(o||e)}})()}static{this.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var N=(e,r)=>r.id;function P(e,r){if(e&1){let t=f();n(0,"div",0)(1,"button",3),h("click",function(){d(t);let o=a();return m(o.authenticate())}),F(),n(2,"svg",4),g(3,"path",5),s(),l(4," Sign up with Google "),D(),g(5,"div"),s()()}}function J(e,r){if(e&1){let t=f();n(0,"button",6),h("click",function(){d(t);let o=a();return m(o.listFiles())}),l(1," List Google Drive Files "),s()}}function K(e,r){e&1&&(n(0,"div"),l(1,"Loading..."),s())}function O(e,r){if(e&1&&(n(0,"li"),l(1),s()),e&2){let t=r.$implicit;c(),E(t.name)}}function Q(e,r){if(e&1&&(n(0,"ul"),T(1,O,2,1,"li",null,N),s()),e&2){let t=a();c(),k(t.files())}}function X(e,r){e&1&&(n(0,"p",2),l(1,"No files found or not authenticated."),s())}var me=(()=>{class e{constructor(t){this.store=t,this.files=p([]),this.isLoading=p(!1),this.googleDriveAuthService=C(B),this.store.select(U).subscribe(i=>this.files.set(i)),this.store.select(M).subscribe(i=>this.isLoading.set(i))}authenticate(){this.googleDriveAuthService.signInWithGoogle()}isAuthenticated(){return this.googleDriveAuthService.isAuthenticated()}listFiles(){this.store.dispatch(A())}static{this.\u0275fac=function(i){return new(i||e)(G(I))}}static{this.\u0275cmp=y({type:e,selectors:[["app-google-drive-files"]],decls:6,vars:2,consts:[[1,"max-w-sm","px-6","sm:px-0"],[1,"ml-4","rounded-md","bg-indigo-600","px-3.5","py-2.5","text-sm","font-semibold","text-white","shadow-sm","hover:bg-indigo-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600"],[1,"ml-4"],["type","button",1,"mb-2","ml-4","mr-2","inline-flex","items-center","justify-between","rounded-lg","bg-[#4285F4]","px-5","py-2.5","text-center","text-sm","font-medium","text-white","hover:bg-[#4285F4]/90","focus:outline-none","focus:ring-4","focus:ring-[#4285F4]/50",3,"click"],["aria-hidden","true","focusable","false","data-prefix","fab","data-icon","google","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 488 512",1,"-ml-1","mr-2","h-4","w-4"],["fill","currentColor","d","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"],[1,"ml-4","rounded-md","bg-indigo-600","px-3.5","py-2.5","text-sm","font-semibold","text-white","shadow-sm","hover:bg-indigo-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600",3,"click"]],template:function(i,o){i&1&&(n(0,"div"),L(1,P,6,0,"div",0)(2,J,2,0,"button",1)(3,K,2,0,"div")(4,Q,3,0,"ul")(5,X,2,0,"p",2),s()),i&2&&(c(),u(o.isAuthenticated()?2:1),c(2),u(o.isLoading()?3:o.files().length>0?4:5))},encapsulation:2,changeDetection:0})}}return e})();export{me as GoogleDriveFilesComponent};
