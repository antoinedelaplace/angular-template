import{a as A,d as V}from"./chunk-MR7S776E.js";import{n as E,o as x,p as $}from"./chunk-SL4L7IUJ.js";import{Aa as S,Ba as G,Ra as c,Sa as u,Xa as p,ab as L,ca as C,fb as g,gb as y,hb as I,ib as n,jb as s,kb as f,mb as h,nb as v,oa as F,ob as a,pb as l,qb as T,tb as k,xa as d,ya as m,za as D}from"./chunk-EJHMALUB.js";var j=$("drive"),U=x(j,e=>e.files),M=x(j,e=>e.isLoading);var R={production:!0,googleRedirectURL:""};var B=(()=>{class e extends V{constructor(){super(...arguments),this.clientId="1031575839836-lcrgq524hp9775ipfjree1b5d6n8egma.apps.googleusercontent.com",this.redirectUri=R.googleRedirectURL,this.oauth2Endpoint="https://accounts.google.com/o/oauth2/v2/auth",this.scope="email profile https://www.googleapis.com/auth/drive"}signInWithGoogle(){let t=`${this.oauth2Endpoint}?client_id=${this.clientId}&redirect_uri=${this.redirectUri}&response_type=token&scope=${this.scope}`,o=500,i=600,H=window.screen.width/2-o/2,W=window.screen.height/2-i/2,q=window.open(t,"googleAuthPopup",`width=${o},height=${i},top=${W},left=${H}`),_=w=>{if(w.origin!==window.location.origin)return;let b=w.data?.accessToken;b&&(this.storeToken(b),window.removeEventListener("message",_),q?.close())};window.addEventListener("message",_)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=G(e)))(i||e)}})()}static{this.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var P=(e,r)=>r.id;function J(e,r){if(e&1){let t=h();n(0,"div",0)(1,"button",3),v("click",function(){d(t);let i=a();return m(i.authenticate())}),D(),n(2,"svg",4),f(3,"path",5),s(),l(4," Sign up with Google "),S(),f(5,"div"),s()()}}function K(e,r){if(e&1){let t=h();n(0,"button",6),v("click",function(){d(t);let i=a();return m(i.listFiles())}),l(1," List Google Drive Files "),s()}}function O(e,r){e&1&&(n(0,"div"),l(1,"Loading..."),s())}function Q(e,r){if(e&1&&(n(0,"li"),l(1),s()),e&2){let t=r.$implicit;c(),T(t.name)}}function X(e,r){if(e&1&&(n(0,"ul"),y(1,Q,2,1,"li",null,P),s()),e&2){let t=a();c(),I(t.files())}}function Y(e,r){e&1&&(n(0,"p",2),l(1,"No files found or not authenticated."),s())}var ae=(()=>{class e{constructor(t,o){this.googleDriveAuthService=t,this.store=o,this.files=p([]),this.isLoading=p(!1),this.store.select(U).subscribe(i=>this.files.set(i)),this.store.select(M).subscribe(i=>this.isLoading.set(i))}authenticate(){this.googleDriveAuthService.signInWithGoogle()}isAuthenticated(){return this.googleDriveAuthService.isAuthenticated()}listFiles(){this.store.dispatch(A())}static{this.\u0275fac=function(o){return new(o||e)(u(B),u(E))}}static{this.\u0275cmp=F({type:e,selectors:[["app-google-drive-files"]],standalone:!0,features:[k],decls:6,vars:2,consts:[[1,"max-w-sm","px-6","sm:px-0"],[1,"ml-4","rounded-md","bg-indigo-600","px-3.5","py-2.5","text-sm","font-semibold","text-white","shadow-sm","hover:bg-indigo-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600"],[1,"ml-4"],["type","button",1,"mb-2","ml-4","mr-2","inline-flex","items-center","justify-between","rounded-lg","bg-[#4285F4]","px-5","py-2.5","text-center","text-sm","font-medium","text-white","hover:bg-[#4285F4]/90","focus:outline-none","focus:ring-4","focus:ring-[#4285F4]/50",3,"click"],["aria-hidden","true","focusable","false","data-prefix","fab","data-icon","google","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 488 512",1,"-ml-1","mr-2","h-4","w-4"],["fill","currentColor","d","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"],[1,"ml-4","rounded-md","bg-indigo-600","px-3.5","py-2.5","text-sm","font-semibold","text-white","shadow-sm","hover:bg-indigo-500","focus-visible:outline","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-indigo-600",3,"click"]],template:function(o,i){o&1&&(n(0,"div"),L(1,J,6,0,"div",0)(2,K,2,0,"button",1)(3,O,2,0,"div")(4,X,3,0,"ul")(5,Y,2,0,"p",2),s()),o&2&&(c(),g(i.isAuthenticated()?2:1),c(2),g(i.isLoading()?3:i.files().length>0?4:5))},encapsulation:2})}}return e})();export{ae as GoogleDriveFilesComponent};
