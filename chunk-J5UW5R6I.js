import{b as K,c as T,o as B,s as F,t as C}from"./chunk-KPZIPDIM.js";import{a as g,b as U,zb as k}from"./chunk-F7JPPGSS.js";var R=K("[User List] Add User",T());function G(){return{ids:[],entities:{}}}function H(){function u(a={}){return Object.assign(G(),a)}return{getInitialState:u}}function J(){function u(a){let l=y=>y.ids,p=y=>y.entities,h=B(l,p,(y,E)=>y.map(A=>E[A])),M=B(l,y=>y.length);return a?{selectIds:B(a,l),selectEntities:B(a,p),selectAll:B(a,h),selectTotal:B(a,M)}:{selectIds:l,selectEntities:p,selectAll:h,selectTotal:M}}return{getSelectors:u}}var r=function(u){return u[u.EntitiesOnly=0]="EntitiesOnly",u[u.Both=1]="Both",u[u.None=2]="None",u}(r||{});function d(u){return function(l,p){let h={ids:[...p.ids],entities:g({},p.entities)},M=u(l,h);return M===r.Both?Object.assign({},p,h):M===r.EntitiesOnly?U(g({},p),{entities:h.entities}):p}}function O(u,a){let l=a(u);return k()&&l===void 0&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",u,"The `selectId` implementation:",a.toString()),l}function L(u){function a(s,t){let e=O(s,u);return e in t.entities?r.None:(t.ids.push(e),t.entities[e]=s,r.Both)}function l(s,t){let e=!1;for(let n of s)e=a(n,t)!==r.None||e;return e?r.Both:r.None}function p(s,t){return t.ids=[],t.entities={},l(s,t),r.Both}function h(s,t){let e=O(s,u);return e in t.entities?(t.entities[e]=s,r.EntitiesOnly):(t.ids.push(e),t.entities[e]=s,r.Both)}function M(s,t){let e=s.map(n=>h(n,t));switch(!0){case e.some(n=>n===r.Both):return r.Both;case e.some(n=>n===r.EntitiesOnly):return r.EntitiesOnly;default:return r.None}}function y(s,t){return E([s],t)}function E(s,t){let n=(s instanceof Array?s:t.ids.filter(i=>s(t.entities[i]))).filter(i=>i in t.entities).map(i=>delete t.entities[i]).length>0;return n&&(t.ids=t.ids.filter(i=>i in t.entities)),n?r.Both:r.None}function A(s){return Object.assign({},s,{ids:[],entities:{}})}function I(s,t,e){let n=e.entities[t.id],i=Object.assign({},n,t.changes),o=O(i,u),c=o!==t.id;return c&&(s[t.id]=o,delete e.entities[t.id]),e.entities[o]=i,c}function v(s,t){return N([s],t)}function N(s,t){let e={};return s=s.filter(i=>i.id in t.entities),s.length>0?s.filter(o=>I(e,o,t)).length>0?(t.ids=t.ids.map(o=>e[o]||o),r.Both):r.EntitiesOnly:r.None}function w(s,t){let n=t.ids.reduce((i,o)=>{let c=s(t.entities[o]);return c!==t.entities[o]&&i.push({id:o,changes:c}),i},[]).filter(({id:i})=>i in t.entities);return N(n,t)}function x({map:s,id:t},e){let n=e.entities[t];if(!n)return r.None;let i=s(n);return v({id:t,changes:i},e)}function j(s,t){return S([s],t)}function S(s,t){let e=[],n=[];for(let c of s){let f=O(c,u);f in t.entities?n.push({id:f,changes:c}):e.push(c)}let i=N(n,t),o=l(e,t);switch(!0){case(o===r.None&&i===r.None):return r.None;case(o===r.Both||i===r.Both):return r.Both;default:return r.EntitiesOnly}}return{removeAll:A,addOne:d(a),addMany:d(l),setAll:d(p),setOne:d(h),setMany:d(M),updateOne:d(v),updateMany:d(N),upsertOne:d(j),upsertMany:d(S),removeOne:d(y),removeMany:d(E),map:d(w),mapOne:d(x)}}function Q(u,a){let{removeOne:l,removeMany:p,removeAll:h}=L(u);function M(e,n){return y([e],n)}function y(e,n){let i=e.filter(o=>!(O(o,u)in n.entities));return i.length===0?r.None:(t(i,n),r.Both)}function E(e,n){return n.entities={},n.ids=[],y(e,n),r.Both}function A(e,n){let i=O(e,u);return i in n.entities?(n.ids=n.ids.filter(o=>o!==i),t([e],n),r.Both):M(e,n)}function I(e,n){let i=e.map(o=>A(o,n));switch(!0){case i.some(o=>o===r.Both):return r.Both;case i.some(o=>o===r.EntitiesOnly):return r.EntitiesOnly;default:return r.None}}function v(e,n){return w([e],n)}function N(e,n,i){if(!(n.id in i.entities))return!1;let o=i.entities[n.id],c=Object.assign({},o,n.changes),f=O(c,u);return delete i.entities[n.id],e.push(c),f!==n.id}function w(e,n){let i=[],o=e.filter(c=>N(i,c,n)).length>0;if(i.length===0)return r.None;{let c=n.ids,f=[];return n.ids=n.ids.filter((m,b)=>m in n.entities?!0:(f.push(b),!1)),t(i,n),!o&&f.every(m=>n.ids[m]===c[m])?r.EntitiesOnly:r.Both}}function x(e,n){let i=n.ids.reduce((o,c)=>{let f=e(n.entities[c]);return f!==n.entities[c]&&o.push({id:c,changes:f}),o},[]);return w(i,n)}function j({map:e,id:n},i){let o=i.entities[n];if(!o)return r.None;let c=e(o);return v({id:n,changes:c},i)}function S(e,n){return s([e],n)}function s(e,n){let i=[],o=[];for(let m of e){let b=O(m,u);b in n.entities?o.push({id:b,changes:m}):i.push(m)}let c=w(o,n),f=y(i,n);switch(!0){case(f===r.None&&c===r.None):return r.None;case(f===r.Both||c===r.Both):return r.Both;default:return r.EntitiesOnly}}function t(e,n){e.sort(a);let i=[],o=0,c=0;for(;o<e.length&&c<n.ids.length;){let f=e[o],m=O(f,u),b=n.ids[c],q=n.entities[b];a(f,q)<=0?(i.push(m),o++):(i.push(b),c++)}o<e.length?n.ids=i.concat(e.slice(o).map(u)):n.ids=i.concat(n.ids.slice(c)),e.forEach((f,m)=>{n.entities[u(f)]=f})}return{removeOne:l,removeMany:p,removeAll:h,addOne:d(M),updateOne:d(v),upsertOne:d(S),setAll:d(E),setOne:d(A),setMany:d(I),addMany:d(y),updateMany:d(w),upsertMany:d(s),map:d(x),mapOne:d(j)}}function V(u={}){let{selectId:a,sortComparer:l}={selectId:u.selectId??(y=>y.id),sortComparer:u.sortComparer??!1},p=H(),h=J(),M=l?Q(a,l):L(a);return g(g(g({selectId:a,sortComparer:l},p),h),M)}var Y=V(),W={users:Y.getInitialState(),loading:!1,error:""},en=C(W,F(R,(u,{user:a})=>U(g({},u),{users:Y.addOne(a,u.users)})));export{R as a,Y as b,en as c};
